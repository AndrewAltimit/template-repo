# Multi-Agent System Configuration Example
# Copy this to .agents.yaml and customize for your needs

# List of enabled agents (claude is always enabled by default)
enabled_agents:
  - claude      # Anthropic's Claude Code (host-only)
  - gemini      # Google's Gemini CLI (host-only)
  - opencode    # SST's OpenCode (containerized)
  - crush       # Charm Bracelet's Crush AI (containerized)

# Agent priorities for different task types
# Agents are tried in order until one succeeds
agent_priorities:
  # For creating PRs from issues
  issue_creation:
    - claude
    - opencode

  # For reviewing PRs
  pr_reviews:
    - gemini
    - claude

  # For implementing code fixes
  code_fixes:
    - claude
    - crush
    - opencode

# Model configuration overrides per agent
model_overrides:
  # Example: Use a different model for OpenCode
  # opencode:
  #   model: deepseek/deepseek-coder-v2-instruct
  #   temperature: 0.3

  # Example: Configure Crush for faster responses
  # crush:
  #   model: qwen/qwen-2.5-coder-7b-instruct
  #   temperature: 0.1

# OpenRouter configuration for agents that support it
openrouter:
  # API key must be provided as OPENROUTER_API_KEY environment variable

  # Default model for OpenRouter-compatible agents
  default_model: qwen/qwen-2.5-coder-32b-instruct

  # Fallback models if primary is unavailable
  fallback_models:
    - deepseek/deepseek-coder-v2-instruct
    - meta-llama/llama-3.1-70b-instruct

  # Per-agent model overrides
  agent_overrides:
    opencode:
      model: qwen/qwen-2.5-coder-32b-instruct
      temperature: 0.2
    crush:
      model: qwen/qwen-2.5-coder-32b-instruct
      temperature: 0.1

# Security settings
security:
  # Users authorized to trigger agent actions via [Approved][Agent] keywords
  # CRITICAL: Only add trusted human users - these can execute code via agents
  agent_admins:
    - your-github-username    # Replace with your GitHub username

  # Trusted sources for comment context (used in PR reviews)
  # Comments from these accounts are marked as trusted when providing context to AI
  # This does NOT grant them ability to trigger agent actions
  trusted_sources:
    - your-github-username    # Replace with your GitHub username
    - github-actions[bot]     # GitHub Actions bot
    - dependabot[bot]         # Dependabot
    - renovate[bot]           # Renovate bot

  # Autonomous mode is REQUIRED for CI/CD operation
  # All agents run in sandboxed environments for security
  autonomous_mode: true  # Enables non-interactive flags like --dangerously-skip-permissions

  # Confirm running in sandboxed environment
  require_sandbox: true

  # Maximum prompt length to prevent abuse
  max_prompt_length: 10000

  # Cleanup temporary files after use
  temp_file_cleanup: true

  # Maximum execution time per agent call
  subprocess_timeout: 600  # 10 minutes

  # Memory limit for subprocess execution
  memory_limit_mb: 500

# Rate limiting (per agent)
rate_limits:
  requests_per_minute: 10
  requests_per_hour: 100

  # Agent-specific overrides
  # claude:
  #   requests_per_minute: 20
  # gemini:
  #   requests_per_minute: 5

# Advanced settings (optional)
advanced:
  # Timeout for agent commands (seconds)
  command_timeout: 300

  # Maximum retries for failed agent calls
  max_retries: 2

  # Enable detailed logging
  debug_mode: false

# Standalone crate -- excluded from the oasis_os workspace because it
# requires the mipsel-sony-psp target and the rust-psp SDK.
# Build with: RUST_PSP_BUILD_STD=1 cargo +nightly psp --release

[workspace]

[package]
name = "oasis-backend-psp"
description = "PSP backend for OASIS_OS: hardware-accelerated GU rendering, controller input"
version = "0.1.0"
edition = "2024"
license = "MIT"
repository = "https://github.com/AndrewAltimit/template-repo"
authors = ["AndrewAltimit"]

[dependencies]
psp = { git = "https://github.com/AndrewAltimit/rust-psp", branch = "feat/std-support", features = ["kernel", "std"] }
oasis-core = { path = "../oasis-core" }

# unicode-width workaround for mips target panic.
[patch.crates-io]
unicode-width = { git = "https://git.sr.ht/~sajattack/unicode-width" }

[profile.release]
lto = true
codegen-units = 1
panic = "abort"
# Do NOT set strip = true -- it conflicts with --emit-relocs needed by prxgen.

[profile.dev]
opt-level = 1
